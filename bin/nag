#! /usr/bin/env coffee
Nag           = require("../index")
ConfigBuilder = require("../lib/configBuilder")
config        = ConfigBuilder.build()

switch config.command

  when 'quiz'
    unless config.ignore
      new Nag({
        interactive: true
        opts: config
      })

  when 'edit'
    spawn  = require('child_process').spawn
    editor = process.env.EDITOR || 'vi'
    child  = spawn(editor, ["#{process.env.HOME}/.config/nag/questions.coffee"], { stdio: 'inherit' })
    child.on('exit', (e, code) ->)

  when 'config'
    spawn  = require('child_process').spawn
    editor = process.env.EDITOR || 'vi'
    child  = spawn(editor, ["#{process.env.HOME}/.config/nag/config.coffee"], { stdio: 'inherit' })
    child.on('exit', (e, code) ->)

  when 'help'
    spawn  = require('child_process').spawn
    pager  = process.env.PAGER || 'less'
    child  = spawn(pager, ["./doc/index"], { stdio: 'inherit' })
    child.on('exit', (e, code) ->)

