#! /usr/bin/env coffee
fs          = require("fs")
NagReadline = require("./lib/nagReadline")
Stream      = require("stream")
Questions   = require("./lib/questions")

Questions.load
  onReady: (questions) ->
    process.exit(0) unless questions.currentQuestion()

    nextQuestion = () ->
      questions.nextQuestion()
      process.exit(0) unless questions.currentQuestion()
      readline.question(
        question: questions.currentQuestionToS()
        onAnswer: onAnswer
      )

    onAnswer = (answer) ->
      questions.logCurrent() if answer == 'yes'
      nextQuestion()

    readline  = new NagReadline()

    readline.question(
      question: questions.currentQuestionToS()
      onAnswer: onAnswer
    )
